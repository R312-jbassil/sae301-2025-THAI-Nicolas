---
import Layout from "../layouts/Layout.astro";
---

<Layout title="TaVue - Lunettes personnalis√©es fran√ßaises">
	<main class="min-h-screen bg-blanc">
		<!-- Test de la configuration Tailwind et des variables -->
		<div class="max-w-7xl mx-auto px-6 md:px-12 lg:px-24 py-12 md:py-20">
			<h1 class="text-4xl md:text-6xl lg:text-display font-bold text-center mb-8 text-vert uppercase tracking-[0.4rem]">
				TaVue
			</h1>
			
			<p class="text-gris text-center text-lg md:text-xl mb-8 max-w-2xl mx-auto">
				Configuration Tailwind CSS et PocketBase r√©ussie ! ‚úÖ
			</p>
			
			<!-- Test de connexion PocketBase -->
			<div class="flex justify-center mb-12">
				<button 
					id="test-pb-btn"
					class="btn btn-primary text-sm md:text-base flex items-center gap-2"
				>
					<span id="pb-status">üîå</span>
					Tester PocketBase
				</button>
			</div>
			
			<div id="pb-result" class="max-w-3xl mx-auto mb-12 hidden">
				<div class="bg-vert-light border-2 border-vert rounded-lg p-6">
					<h3 class="font-bold text-lg mb-3 text-noir">R√©sultat du test :</h3>
					<pre id="pb-output" class="bg-white p-4 rounded text-xs md:text-sm overflow-x-auto text-noir"></pre>
				</div>
			</div>
			
			<!-- Test des boutons -->
			<div class="flex flex-col sm:flex-row justify-center gap-4 mb-12">
				<button class="btn btn-primary text-sm md:text-base">
					Bouton Primary
				</button>
				<button class="btn btn-secondary text-sm md:text-base">
					Bouton Secondary
				</button>
				<button class="btn btn-ghost text-sm md:text-base">
					Bouton Ghost
				</button>
			</div>
			
			<!-- Test des cards -->
			<div class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-5xl mx-auto mb-16">
				<div class="card text-center p-6 md:p-8 hover:shadow-card transition-all duration-300">
					<div class="bg-vert-light w-14 h-14 md:w-16 md:h-16 rounded-full mx-auto mb-4 flex items-center justify-center">
						<span class="text-2xl md:text-3xl">üëì</span>
					</div>
					<h3 class="font-semibold text-lg md:text-xl mb-2 text-noir">Style unique</h3>
					<p class="text-gris text-sm md:text-base">
						Personnalisez chaque d√©tail de vos lunettes
					</p>
				</div>
				
				<div class="card text-center p-6 md:p-8 hover:shadow-card transition-all duration-300">
					<div class="bg-vert-light w-14 h-14 md:w-16 md:h-16 rounded-full mx-auto mb-4 flex items-center justify-center">
						<span class="text-2xl md:text-3xl">üëÅÔ∏è</span>
					</div>
					<h3 class="font-semibold text-lg md:text-xl mb-2 text-noir">Vision parfaite</h3>
					<p class="text-gris text-sm md:text-base">
						Verres sur mesure avec correction optimale
					</p>
				</div>
				
				<div class="card text-center p-6 md:p-8 hover:shadow-card transition-all duration-300">
					<div class="bg-vert-light w-14 h-14 md:w-16 md:h-16 rounded-full mx-auto mb-4 flex items-center justify-center">
						<span class="text-2xl md:text-3xl">‚≠ê</span>
					</div>
					<h3 class="font-semibold text-lg md:text-xl mb-2 text-noir">Qualit√© premium</h3>
					<p class="text-gris text-sm md:text-base">
						Fabrication artisanale fran√ßaise
					</p>
				</div>
			</div>
			
			<!-- Test des couleurs Tailwind -->
			<div class="max-w-2xl mx-auto">
				<h2 class="text-2xl md:text-heading font-bold text-center mb-8 text-noir uppercase tracking-wider">
					Palette de couleurs
				</h2>
				<div class="grid grid-cols-2 md:grid-cols-4 gap-4">
					<div class="text-center">
						<div class="w-full h-20 rounded-lg mb-2 shadow-tavue bg-vert"></div>
						<p class="text-xs md:text-sm font-medium text-noir">Vert TaVue</p>
						<p class="text-xs text-gris-light">#589772</p>
					</div>
					<div class="text-center">
						<div class="w-full h-20 rounded-lg mb-2 bg-vert-light border-2 border-border"></div>
						<p class="text-xs md:text-sm font-medium text-noir">Vert Light</p>
						<p class="text-xs text-gris-light">#F0F7F4</p>
					</div>
					<div class="text-center">
						<div class="w-full h-20 rounded-lg mb-2 bg-noir"></div>
						<p class="text-xs md:text-sm font-medium text-noir">Noir</p>
						<p class="text-xs text-gris-light">#1A1A1A</p>
					</div>
					<div class="text-center">
						<div class="w-full h-20 rounded-lg mb-2 bg-gris"></div>
						<p class="text-xs md:text-sm font-medium text-noir">Gris</p>
						<p class="text-xs text-gris-light">#4A5A54</p>
					</div>
				</div>
			</div>
		</div>
	</main>
</Layout>

<script>
	// Test de connexion PocketBase
	const testBtn = document.getElementById('test-pb-btn') as HTMLButtonElement;
	const resultDiv = document.getElementById('pb-result');
	const outputPre = document.getElementById('pb-output');
	const statusSpan = document.getElementById('pb-status');
	
	testBtn?.addEventListener('click', async () => {
		// Afficher le chargement
		if (statusSpan) statusSpan.textContent = '‚è≥';
		testBtn.disabled = true;
		testBtn.classList.add('opacity-50', 'cursor-wait');
		
		try {
			const response = await fetch('/api/test-pb');
			const data = await response.json();
			
			// Afficher le r√©sultat
			if (resultDiv && outputPre) {
				resultDiv.classList.remove('hidden');
				outputPre.textContent = JSON.stringify(data, null, 2);
			}
			
			// Mettre √† jour le statut
			if (statusSpan) {
				statusSpan.textContent = data.success ? '‚úÖ' : '‚ùå';
			}
			
			// Changer la couleur du bouton selon le r√©sultat
			testBtn?.classList.remove('btn-primary');
			testBtn?.classList.add(data.success ? 'bg-vert' : 'bg-red-500');
			
		} catch (error) {
			console.error('Erreur:', error);
			if (statusSpan) statusSpan.textContent = '‚ùå';
			if (resultDiv && outputPre) {
				resultDiv.classList.remove('hidden');
				outputPre.textContent = `Erreur: ${error}`;
			}
		} finally {
			testBtn.disabled = false;
			testBtn.classList.remove('opacity-50', 'cursor-wait');
		}
	});
</script>