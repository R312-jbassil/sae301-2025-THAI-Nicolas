---
interface Props {
  nombrePersonnalisations?: number;
  stock?: "limité" | "normal" | "dernieres-pieces";
  class?: string;
}

const { nombrePersonnalisations, stock, class: className } = Astro.props;
---

{(nombrePersonnalisations || stock) && (
  <div class={`flex flex-col gap-2 ${className || ''}`}>
    <!-- Badge preuve sociale -->
    {nombrePersonnalisations && nombrePersonnalisations > 0 && (
      <div class="bg-white/95 backdrop-blur-sm rounded-full px-4 py-2 flex items-center gap-2 shadow-lg border border-vert/20">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-vert" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
        </svg>
        <span class="text-xs font-semibold text-noir">
          {nombrePersonnalisations}+ personnes ont personnalisé ce modèle
        </span>
      </div>
    )}

    <!-- Badge rareté/stock -->
    {stock === "limité" && (
      <div class="bg-orange-500/95 backdrop-blur-sm rounded-full px-4 py-2 flex items-center gap-2 shadow-lg">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        <span class="text-xs font-bold text-white">
          Stock limité
        </span>
      </div>
    )}

    {stock === "dernieres-pieces" && (
      <div class="bg-red-500/95 backdrop-blur-sm rounded-full px-4 py-2 flex items-center gap-2 shadow-lg animate-pulse">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
        </svg>
        <span class="text-xs font-bold text-white">
          Dernières pièces !
        </span>
      </div>
    )}
  </div>
)}
