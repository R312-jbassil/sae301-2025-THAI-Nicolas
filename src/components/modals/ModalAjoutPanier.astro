---
interface Props {
  id: string;
}

const { id } = Astro.props;
---

<div id={id} class="modal-cart fixed inset-0 z-50 hidden items-center justify-center px-4" style="background-color: rgba(240, 247, 244, 0.7); backdrop-filter: blur(4px);">
  <div class="modal-cart-content bg-white rounded-3xl shadow-2xl max-w-4xl w-full relative animate-slide-up border-2 border-vert">
    <!-- Bouton fermer -->
    <button class="modal-close absolute top-6 right-6 w-10 h-10 rounded-full bg-vert-light hover:bg-vert transition-all duration-300 flex items-center justify-center group z-10" data-modal={id}>
      <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-vert group-hover:text-white transition-colors" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>

    <!-- Icône de succès animée -->
    <div class="absolute -top-12 left-1/2 transform -translate-x-1/2">
      <div class="w-24 h-24 bg-vert rounded-full flex items-center justify-center shadow-2xl animate-bounce-slow border-4 border-white">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-12 h-12 text-white animate-check" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
        </svg>
      </div>
    </div>

    <!-- Contenu -->
    <div class="pt-16 pb-8 px-10">
      <!-- Message de confirmation -->
      <div class="text-center mb-6">
        <h2 class="text-3xl font-bold text-noir mb-2 tracking-wide">Configuration sauvegardée</h2>
        <p class="text-gris text-base">Votre personnalisation a été enregistrée avec succès</p>
      </div>

      <!-- Contenu principal : Prévisualisation + Configuration -->
      <div class="flex gap-6 mb-6">
        <!-- Prévisualisation des lunettes -->
        <div class="w-1/2">
          <div class="bg-vert-light rounded-2xl p-6 h-full flex flex-col">
            <h3 class="text-lg font-bold text-noir mb-4">Aperçu</h3>
            <div class="flex-1 flex items-center justify-center bg-white rounded-xl p-6">
              <img src="/lunettes.svg" alt="Aperçu lunettes" class="w-full h-auto" />
            </div>
          </div>
        </div>

        <!-- Résumé de la configuration -->
        <div class="w-1/2">
          <div class="bg-linear-to-br from-vert-light to-white rounded-2xl p-6 h-full border-2 border-vert">
            <div class="flex items-start justify-between mb-5">
              <div>
                <h3 class="text-2xl font-bold text-noir mb-1">ÉLÉGANCE</h3>
                <p class="text-sm text-gris">Configuration personnalisée</p>
              </div>
              <div class="text-right">
                <p class="text-xs text-gris mb-1">Prix total</p>
                <p class="text-3xl font-bold text-vert">189€</p>
              </div>
            </div>
            
            <div class="space-y-2.5">
              <div class="bg-white rounded-lg p-3 border border-vert-light">
                <p class="text-gris text-xs mb-0.5">Taille</p>
                <p class="font-semibold text-noir text-sm" id="cart-size">52-18</p>
              </div>
              <div class="bg-white rounded-lg p-3 border border-vert-light">
                <p class="text-gris text-xs mb-0.5">Type de verres</p>
                <p class="font-semibold text-noir text-sm">Classique</p>
              </div>
              <div class="bg-white rounded-lg p-3 border border-vert-light">
                <p class="text-gris text-xs mb-0.5">Forme</p>
                <p class="font-semibold text-noir text-sm">Rectangulaire</p>
              </div>
              <div class="bg-white rounded-lg p-3 border border-vert-light">
                <p class="text-gris text-xs mb-0.5">Épaisseur</p>
                <p class="font-semibold text-noir text-sm">Moyenne</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Boutons d'action -->
      <div class="flex gap-3">
        <button class="flex-1 bg-white border-2 border-vert text-vert rounded-full px-6 py-4 font-bold text-sm hover:bg-vert-light transition-all duration-300 modal-close" data-modal="cart-modal">
          CONTINUER LA PERSONNALISATION
        </button>
        <button class="flex-1 bg-vert text-white rounded-full px-6 py-4 font-bold text-sm hover:bg-[#4a7d5f] transition-all duration-300 text-center flex items-center justify-center gap-2">
          AJOUTER AU PANIER
          <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
          </svg>
        </button>
      </div>
    </div>
  </div>
</div>

<style>
  .modal-cart {
    animation: fadeIn 0.3s ease-out;
  }

  .modal-cart.hidden {
    display: none;
  }

  .modal-cart:not(.hidden) {
    display: flex;
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes slide-up {
    from {
      transform: translateY(30px);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  @keyframes bounce-slow {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-10px);
    }
  }

  @keyframes check {
    0% {
      stroke-dasharray: 0, 100;
    }
    100% {
      stroke-dasharray: 100, 0;
    }
  }

  .animate-slide-up {
    animation: slide-up 0.4s ease-out;
  }

  .animate-bounce-slow {
    animation: bounce-slow 2s infinite;
  }

  .animate-check {
    stroke-dasharray: 100;
    animation: check 0.6s ease-out 0.2s forwards;
  }
</style>
